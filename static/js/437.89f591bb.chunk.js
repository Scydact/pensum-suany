"use strict";(self.webpackChunkpensum_suany=self.webpackChunkpensum_suany||[]).push([[437],{2437:function(e,t,r){r.r(t),r.d(t,{default:function(){return d},extractPensum:function(){return v},legactExtractPensum:function(){return m}});var n=r(1987),a=r(207),o=r(257),i=r(2050),c=["","https://api.allorigins.win/raw?url=","https://yacdn.org/serve/","https://cors-anywhere.herokuapp.com/","https://crossorigin.me/","https://cors-proxy.htmldriven.com/?url=","https://thingproxy.freeboard.io/fetch/","http://www.whateverorigin.org/get?url="];function u(e){return s.apply(this,arguments)}function s(){return s=(0,a.Z)((0,n.Z)().mark((function e(t){var r,a,o,u,s,l,p,d=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=d.length>1&&void 0!==d[1]?d[1]:{},a=d.length>2?d[2]:void 0,o=d.length>3&&void 0!==d[3]?d[3]:c,u=0,s=(0,n.Z)().mark((function e(){var c,s,p,d,h,v,m,f;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=o[u],s=(new Date).getTime(),p=c+t,d=new AbortController,h=d.signal,r.signal=h,v=setTimeout((function(){d.abort(),i.warn("Timed out!")}),4e3),e.prev=7,a&&a("attempt",c,u),e.next=11,fetch(p,r);case 11:if(l=e.sent,a&&a("request",c,u),clearTimeout(v),!l.ok){e.next=24;break}return m=(new Date).getTime(),i.info("CORS proxy '".concat(p,"' succeeded in ").concat(m-s," ms.'")),a&&a("success",c,u),e.next=20,l.text();case 20:return e.t0=e.sent,e.abrupt("return",{v:e.t0});case 24:throw new Error("Response was not OK!");case 25:e.next=34;break;case 27:e.prev=27,e.t1=e.catch(7),clearTimeout(v),f=(new Date).getTime(),i.warn("CORS proxy '".concat(c,"' failed in ").concat(f-s,"ms.'")),i.warn(e.t1),a&&a("error",c,u);case 34:return e.prev=34,++u,e.finish(34);case 37:case"end":return e.stop()}}),e,null,[[7,27,34,37]])}));case 5:if(!(u<o.length)){e.next=12;break}return e.delegateYield(s(),"t0",7);case 7:if(!(p=e.t0)){e.next=10;break}return e.abrupt("return",p.v);case 10:e.next=5;break;case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),s.apply(this,arguments)}var l=r(191),p=r(2050);function d(e,t){return h.apply(this,arguments)}function h(){return h=(0,a.Z)((0,n.Z)().mark((function e(t,r){var a,o,i,c,s,l,p=arguments;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(p.length>2&&void 0!==p[2]?p[2]:"https://servicios.unapec.edu.do/pensum/Main/Detalles/")+t,o={cache:"force-cache"},e.next=5,u(a,o,r);case 5:if(i=e.sent){e.next=8;break}return e.abrupt("return",null);case 8:return c=new DOMParser,s=c.parseFromString(i,"text/xml"),l=v(s,a),e.abrupt("return",l);case 12:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function v(e,t){try{var r=m(e),n=(0,o.qi)(r,"unapec");return n.fetchDate=(0,l.kN)(new Date),n.src={type:"online",date:n.fetchDate,url:t},n}catch(a){return p.error(a),null}}function m(e){var t,r,n,a,o,i,c={carrera:"",codigo:"",vigencia:"",infoCarrera:[],cuats:[],version:2};if(0===e.getElementsByClassName("contPensum").length||e.getElementsByClassName("contPensum")[0].children.length<2)throw new Error("Document has no pensum inside!");var u=e.getElementsByClassName("cabPensum")[0];if(!u)throw new Error("Unable to get table element.");c.carrera=(null===u||void 0===u||null===(t=u.firstElementChild)||void 0===t||null===(r=t.textContent)||void 0===r?void 0:r.trim())||"";var s=u.getElementsByTagName("p")[0].children;if(c.codigo=(null===(n=s[0])||void 0===n||null===(a=n.textContent)||void 0===a?void 0:a.trim())||"",c.vigencia=(null===(o=s[1])||void 0===o||null===(i=o.textContent)||void 0===i?void 0:i.trim())||"",""===c.carrera)throw new Error("Unable to get pensum name");if(""===c.codigo)throw new Error("Unable to get pensum code");for(var l=e.getElementsByClassName("infoCarrera")[0].children,p=0;p<l.length;++p){var d,h,v;c.infoCarrera.push((null===(d=l[p])||void 0===d||null===(h=d.textContent)||void 0===h||null===(v=h.replace(/\n/g," "))||void 0===v?void 0:v.trim())||"")}for(var m=e.getElementsByClassName("cuatrim"),f=0;f<m.length;++f){for(var g=m[f].children,w=[],x=1;x<g.length;++x){var b,C,y,E,k,D,T={codigo:"",asignatura:"",creditos:0},Z=[],N=[];T.prereq=Z,T.prereqExtra=N;var B=g[x].children;if(T.codigo=(null===(b=B[0])||void 0===b||null===(C=b.textContent)||void 0===C?void 0:C.trim())||"",T.asignatura=(null===(y=B[1])||void 0===y||null===(E=y.textContent)||void 0===E?void 0:E.trim())||"",T.creditos=parseFloat((null===(k=B[2])||void 0===k?void 0:k.textContent)||"-Infinity"),""===T.codigo)throw new Error("Unable to get code for mat ".concat(T.asignatura," @ cuat ").concat(f+1));if(""===T.asignatura)throw new Error("Unable to get name for mat ".concat(T.codigo," @ cuat ").concat(f+1));if(T.creditos===-1/0)throw new Error("Unable to get creds for mat ".concat(T.codigo,":").concat(T.asignatura," @ cuat ").concat(f+1));for(var P=((null===(D=B[3])||void 0===D?void 0:D.textContent)||"").replace(/\n/g,",").split(",").map((function(e){return e.trim()})).filter((function(e){return""!==e})),U=0;U<P.length;U++){var q=P[U];q.length<8?Z.push(q):N.push(q)}w.push(T)}c.cuats.push(w)}return c}}}]);
//# sourceMappingURL=437.89f591bb.chunk.js.map